{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alecd/Desktop/Code/School/App%20Dev%20II/Final%20Project/appdev2_final_project/frontend/app/src/app/map/map-instance/create-map-instance.ts"],"sourcesContent":["import mapboxgl from \"mapbox-gl\";\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\n\r\nclass Map {\r\n  private mapRef: mapboxgl.Map | null;\r\n  private mapContainerRef: HTMLDivElement | null;\r\n\r\n  constructor() {\r\n    this.mapRef = null;\r\n    this.mapContainerRef = null;\r\n  }\r\n\r\n  setContainer(container: HTMLDivElement) {\r\n    if (this.mapContainerRef !== container) {\r\n      this.mapContainerRef = container;\r\n      this.initMap();\r\n    }\r\n  }\r\n\r\n  private initMap() {\r\n    if (!this.mapContainerRef || this.mapRef) return;\r\n\r\n    mapboxgl.accessToken = \"pk.eyJ1IjoiYWxlY3JkYW4iLCJhIjoiY203ejdtdmVhMGlocDJrcTQxY3Juamg0aiJ9.4PKhiLg4cZmfj0FOMXqeBw\";\r\n\r\n    this.mapRef = new mapboxgl.Map({\r\n      container: this.mapContainerRef,\r\n      style: \"mapbox://styles/mapbox/streets-v11\",\r\n      center: [-74.5, 40],\r\n      zoom: 9,\r\n      projection: \"globe\",\r\n    });\r\n\r\n    this.mapRef.on(\"style.load\", () => {\r\n      this.mapRef?.setFog({});\r\n    });\r\n  }\r\n\r\n  getInstance() {\r\n    return this.mapRef;\r\n  }\r\n\r\n  removeMap() {\r\n    if (this.mapRef) {\r\n      this.mapRef.remove();\r\n      this.mapRef = null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Map;\r\n"],"names":[],"mappings":";;;AAAA;;;AAGA,MAAM;IACI,OAA4B;IAC5B,gBAAuC;IAE/C,aAAc;QACZ,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,eAAe,GAAG;IACzB;IAEA,aAAa,SAAyB,EAAE;QACtC,IAAI,IAAI,CAAC,eAAe,KAAK,WAAW;YACtC,IAAI,CAAC,eAAe,GAAG;YACvB,IAAI,CAAC,OAAO;QACd;IACF;IAEQ,UAAU;QAChB,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,MAAM,EAAE;QAE1C,uJAAA,CAAA,UAAQ,CAAC,WAAW,GAAG;QAEvB,IAAI,CAAC,MAAM,GAAG,IAAI,uJAAA,CAAA,UAAQ,CAAC,GAAG,CAAC;YAC7B,WAAW,IAAI,CAAC,eAAe;YAC/B,OAAO;YACP,QAAQ;gBAAC,CAAC;gBAAM;aAAG;YACnB,MAAM;YACN,YAAY;QACd;QAEA,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,cAAc;YAC3B,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC;QACvB;IACF;IAEA,cAAc;QACZ,OAAO,IAAI,CAAC,MAAM;IACpB;IAEA,YAAY;QACV,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,MAAM;YAClB,IAAI,CAAC,MAAM,GAAG;QAChB;IACF;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alecd/Desktop/Code/School/App%20Dev%20II/Final%20Project/appdev2_final_project/frontend/app/src/app/map/features/createRoute.ts"],"sourcesContent":["import mapboxgl from \"mapbox-gl\";\r\n\r\ntype Coordinates = [number, number, number, number];\r\n\r\nclass MapRoute {\r\n  private type: string;\r\n  private coords: Coordinates;\r\n  private instance: mapboxgl.Map;\r\n\r\n  constructor(instance: mapboxgl.Map, type: string, coords: Coordinates) {\r\n    this.instance = instance;\r\n    this.type = type;\r\n    this.coords = coords;\r\n  }\r\n\r\n  static getInstance(): typeof mapboxgl {\r\n    if (!mapboxgl.accessToken) {\r\n      throw new Error(\r\n        \"MapboxGL is not initialized. Set accessToken before using.\"\r\n      );\r\n    }\r\n    return mapboxgl;\r\n  }\r\n\r\n  private async fetchRoute(coords: Coordinates): Promise<any | null> {\r\n    try {\r\n      const response = await fetch(\r\n        `https://api.mapbox.com/directions/v5/mapbox/${this.type}/${coords[0]},${coords[1]};${coords[2]},${coords[3]}?steps=true&geometries=geojson&access_token=${mapboxgl.accessToken}`,\r\n        { method: \"GET\" }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! Status: ${response.status}`);\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error(\"Error fetching route:\", error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private buildRoute(routeData: any | null): mapboxgl.Map {\r\n    if (!routeData || !routeData.routes || routeData.routes.length === 0) {\r\n      console.error(\"Error: No route data provided.\");\r\n      return this.instance;\r\n    }\r\n\r\n    const route = routeData.routes[0].geometry.coordinates;\r\n\r\n    const geojson: any = {\r\n      type: \"Feature\",\r\n      properties: {},\r\n      geometry: {\r\n        type: \"LineString\",\r\n        coordinates: route,\r\n      },\r\n    };\r\n\r\n    const existingSource = this.instance.getSource(\"route\");\r\n    if (existingSource) {\r\n      console.log(\"Updating existing route layer.\");\r\n      (existingSource as mapboxgl.GeoJSONSource).setData(geojson);\r\n    } else {\r\n      this.instance.addSource(\"route\", {\r\n        type: \"geojson\",\r\n        data: geojson,\r\n      });\r\n\r\n      this.instance.addLayer({\r\n        id: \"route\",\r\n        type: \"line\",\r\n        source: \"route\",\r\n        layout: {\r\n          \"line-join\": \"round\",\r\n          \"line-cap\": \"round\",\r\n        },\r\n        paint: {\r\n          \"line-color\": \"#3887be\",\r\n          \"line-width\": 5,\r\n          \"line-opacity\": 0.75,\r\n        },\r\n      });\r\n    }\r\n\r\n    return this.instance;\r\n  }\r\n\r\n  async getRoute(): Promise<mapboxgl.Map> {\r\n    const routeData = await this.fetchRoute(this.coords);\r\n    return this.buildRoute(routeData);\r\n  }\r\n}\r\n\r\nexport default MapRoute;\r\n"],"names":[],"mappings":";;;AAAA;;AAIA,MAAM;IACI,KAAa;IACb,OAAoB;IACpB,SAAuB;IAE/B,YAAY,QAAsB,EAAE,IAAY,EAAE,MAAmB,CAAE;QACrE,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,MAAM,GAAG;IAChB;IAEA,OAAO,cAA+B;QACpC,IAAI,CAAC,uJAAA,CAAA,UAAQ,CAAC,WAAW,EAAE;YACzB,MAAM,IAAI,MACR;QAEJ;QACA,OAAO,uJAAA,CAAA,UAAQ;IACjB;IAEA,MAAc,WAAW,MAAmB,EAAuB;QACjE,IAAI;YACF,MAAM,WAAW,MAAM,MACrB,CAAC,4CAA4C,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,4CAA4C,EAAE,uJAAA,CAAA,UAAQ,CAAC,WAAW,EAAE,EACjL;gBAAE,QAAQ;YAAM;YAGlB,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;YAC1D;YAEA,OAAO,MAAM,SAAS,IAAI;QAC5B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,OAAO;QACT;IACF;IAEQ,WAAW,SAAqB,EAAgB;QACtD,IAAI,CAAC,aAAa,CAAC,UAAU,MAAM,IAAI,UAAU,MAAM,CAAC,MAAM,KAAK,GAAG;YACpE,QAAQ,KAAK,CAAC;YACd,OAAO,IAAI,CAAC,QAAQ;QACtB;QAEA,MAAM,QAAQ,UAAU,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,WAAW;QAEtD,MAAM,UAAe;YACnB,MAAM;YACN,YAAY,CAAC;YACb,UAAU;gBACR,MAAM;gBACN,aAAa;YACf;QACF;QAEA,MAAM,iBAAiB,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;QAC/C,IAAI,gBAAgB;YAClB,QAAQ,GAAG,CAAC;YACX,eAA0C,OAAO,CAAC;QACrD,OAAO;YACL,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS;gBAC/B,MAAM;gBACN,MAAM;YACR;YAEA,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;gBACrB,IAAI;gBACJ,MAAM;gBACN,QAAQ;gBACR,QAAQ;oBACN,aAAa;oBACb,YAAY;gBACd;gBACA,OAAO;oBACL,cAAc;oBACd,cAAc;oBACd,gBAAgB;gBAClB;YACF;QACF;QAEA,OAAO,IAAI,CAAC,QAAQ;IACtB;IAEA,MAAM,WAAkC;QACtC,MAAM,YAAY,MAAM,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM;QACnD,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alecd/Desktop/Code/School/App%20Dev%20II/Final%20Project/appdev2_final_project/frontend/app/src/app/map/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport Map from \"./map-instance/create-map-instance\";\r\nimport MapRoute from \"./features/createRoute\";\r\n\r\nconst MapComponent = () => {\r\n  const mapContainerRef = useRef<HTMLDivElement | null>(null);\r\n  const [mapInstance, setMapInstance] = useState<mapboxgl.Map | null>(null);\r\n  const map = useRef(new Map()).current;\r\n\r\n  useEffect(() => {\r\n    if (!mapContainerRef.current) {\r\n      console.error(\"Error: Map container is null.\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"Initializing map container...\");\r\n    map.setContainer(mapContainerRef.current);\r\n\r\n    const instance = map.getInstance();\r\n    if (!instance) {\r\n      console.error(\"Error: Map instance failed to initialize.\");\r\n      return;\r\n    }\r\n\r\n    setMapInstance(instance);\r\n\r\n    return () => {\r\n      if (instance) {\r\n        console.log(\"Cleaning up map instance...\");\r\n        instance.remove();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!mapInstance) return;\r\n\r\n    const fetchRoute = async () => {\r\n      const coords: [number, number, number, number] = [\r\n        -74.006,\r\n        40.7128, // Start: Lower Manhattan\r\n        -73.9352,\r\n        40.7306, // End: Brooklyn Bridge Park\r\n      ];\r\n\r\n      const mapRoute = new MapRoute(mapInstance, \"cycling\", coords);\r\n      const updatedMap = await mapRoute.getRoute();\r\n      setMapInstance(updatedMap);\r\n    };\r\n\r\n    fetchRoute();\r\n  }, [mapInstance]);\r\n\r\n  return (\r\n    <div\r\n      ref={mapContainerRef}\r\n      style={{ width: \"100%\", height: \"100vh\", background: \"#ddd\" }}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default MapComponent;\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,MAAM,eAAe;;IACnB,MAAM,kBAAkB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAyB;IACtD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAuB;IACpE,MAAM,MAAM,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE,IAAI,oKAAA,CAAA,UAAG,IAAI,OAAO;IAErC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,CAAC,gBAAgB,OAAO,EAAE;gBAC5B,QAAQ,KAAK,CAAC;gBACd;YACF;YAEA,QAAQ,GAAG,CAAC;YACZ,IAAI,YAAY,CAAC,gBAAgB,OAAO;YAExC,MAAM,WAAW,IAAI,WAAW;YAChC,IAAI,CAAC,UAAU;gBACb,QAAQ,KAAK,CAAC;gBACd;YACF;YAEA,eAAe;YAEf;0CAAO;oBACL,IAAI,UAAU;wBACZ,QAAQ,GAAG,CAAC;wBACZ,SAAS,MAAM;oBACjB;gBACF;;QACF;iCAAG,EAAE;IAEL,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,CAAC,aAAa;YAElB,MAAM;qDAAa;oBACjB,MAAM,SAA2C;wBAC/C,CAAC;wBACD;wBACA,CAAC;wBACD;qBACD;oBAED,MAAM,WAAW,IAAI,+IAAA,CAAA,UAAQ,CAAC,aAAa,WAAW;oBACtD,MAAM,aAAa,MAAM,SAAS,QAAQ;oBAC1C,eAAe;gBACjB;;YAEA;QACF;iCAAG;QAAC;KAAY;IAEhB,qBACE,6LAAC;QACC,KAAK;QACL,OAAO;YAAE,OAAO;YAAQ,QAAQ;YAAS,YAAY;QAAO;;;;;;AAGlE;GAvDM;KAAA;uCAyDS","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alecd/Desktop/Code/School/App%20Dev%20II/Final%20Project/appdev2_final_project/frontend/app/src/app/menus/menu.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useState } from \"react\";\r\nimport { AddressAutofill } from \"@mapbox/search-js-react\";\r\n\r\nconst Menu: React.FC = () => {\r\n  const [start, setStart] = useState(\"\");\r\n  const [destination, setDestination] = useState(\"\");\r\n\r\n  const handleChangeStart = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setStart(e.target.value);\r\n  };\r\n\r\n  const handleChangeDest = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setDestination(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    console.log(\"Start:\", start);\r\n    console.log(\"Destination:\", destination);\r\n  };\r\n\r\n  return (\r\n    <div className=\"menu absolute top-5 left-5 z-10 bg-slate-950/90 backdrop-blur-md rounded-xl\">\r\n      <form onSubmit={handleSubmit} className=\"space-y-6 p-7 w-[450px]\">\r\n        {/* Start Location Input */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-100\">\r\n            Start\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <AddressAutofill accessToken=\"pk.eyJ1IjoiYWxlY3JkYW4iLCJhIjoiY203ejdtdmVhMGlocDJrcTQxY3Juamg0aiJ9.4PKhiLg4cZmfj0FOMXqeBw\">\r\n              <input\r\n                autoComplete=\"shipping address-line1\"\r\n                value={start}\r\n                onChange={handleChangeStart}\r\n                className=\"block w-full rounded-md bg-gray-800/90 backdrop-blur-md px-3 py-1.5 text-base text-gray-100 outline outline-1 -outline-offset-1 outline-gray-600 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-500 sm:text-sm\"\r\n              />\r\n            </AddressAutofill>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Destination Input */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-100\">\r\n            Destination\r\n          </label>\r\n          <div className=\"mt-2\">\r\n            <AddressAutofill accessToken=\"pk.eyJ1IjoiYWxlY3JkYW4iLCJhIjoiY203ejdtdmVhMGlocDJrcTQxY3Juamg0aiJ9.4PKhiLg4cZmfj0FOMXqeBw\">\r\n              <input\r\n                autoComplete=\"shipping address-line1\"\r\n                value={destination}\r\n                onChange={handleChangeDest}\r\n                className=\"block w-full rounded-md bg-gray-800/90 backdrop-blur-md px-3 py-1.5 text-base text-gray-100 outline outline-1 -outline-offset-1 outline-gray-600 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-500 sm:text-sm\"\r\n              />\r\n            </AddressAutofill>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Submit Button */}\r\n        <div>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"flex w-full justify-center rounded-md bg-indigo-500 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500\"\r\n          >\r\n            Route\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;;;AAHA;;;AAKA,MAAM,OAAiB;;IACrB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,oBAAoB,CAAC;QACzB,SAAS,EAAE,MAAM,CAAC,KAAK;IACzB;IAEA,MAAM,mBAAmB,CAAC;QACxB,eAAe,EAAE,MAAM,CAAC,KAAK;IAC/B;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,QAAQ,GAAG,CAAC,UAAU;QACtB,QAAQ,GAAG,CAAC,gBAAgB;IAC9B;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAK,UAAU;YAAc,WAAU;;8BAEtC,6LAAC;;sCACC,6LAAC;4BAAM,WAAU;sCAA0C;;;;;;sCAG3D,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,4LAAA,CAAA,kBAAe;gCAAC,aAAY;0CAC3B,cAAA,6LAAC;oCACC,cAAa;oCACb,OAAO;oCACP,UAAU;oCACV,WAAU;;;;;;;;;;;;;;;;;;;;;;8BAOlB,6LAAC;;sCACC,6LAAC;4BAAM,WAAU;sCAA0C;;;;;;sCAG3D,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,4LAAA,CAAA,kBAAe;gCAAC,aAAY;0CAC3B,cAAA,6LAAC;oCACC,cAAa;oCACb,OAAO;oCACP,UAAU;oCACV,WAAU;;;;;;;;;;;;;;;;;;;;;;8BAOlB,6LAAC;8BACC,cAAA,6LAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;GAnEM;KAAA;uCAqES","debugId":null}},
    {"offset": {"line": 390, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alecd/Desktop/Code/School/App%20Dev%20II/Final%20Project/appdev2_final_project/frontend/app/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport MapView from \"./map/page\";\nimport Menu from \"./menus/menu\";\n\n\nexport default function Home() {\n  return (\n    <div>\n      <div className=\"menu\">\n        <Menu />\n      </div>\n      {/* Map */}\n      <div className=\"map-container\">\n        <MapView />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAOe,SAAS;IACtB,qBACE,6LAAC;;0BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,+HAAA,CAAA,UAAI;;;;;;;;;;0BAGP,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,6HAAA,CAAA,UAAO;;;;;;;;;;;;;;;;AAIhB;KAZwB","debugId":null}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}